# NoC Verification Environment

The simulation environment is based-on SystemVerilog Layered Verification approach
and is used for verifying the NoC at system level.

For that purpose a DUV has been built, which is composed of eight tiles arranged
in a 2D mesh 4x2 layout.

Each tile consists of a Xilinx AXI-Stream Manager and Subordinate VIP Cores,
a Network Interface and a NoC Switch.

In order to test different sequences of stimuli and configurations,
an agent and environment have been built. They can be found at `sim/network_on_chip_agent`
and `sim/network_on_chip` folders respectively.

The agent contains:
- A generator of AXI-Stream stimulus
- A driver to drive stimulus into the DUV
- A monitor to monitor some interfaces and capture the information required to
verify the tests.

The environment contains:
- The testbench
- The tests
- The environment itself
- The scoreboard to compare the reference model and the actual information
captured by the monitor

# How it works

The testbench instantiates the DUV and the test and provides the required signal
clocks and resets.

The test creates the environment, generates a random environment configuration and
applies it to the environment.

The environment creates the agent components and the scoreboard using the generated configuration.

There is a generator, a driver and a monitor for each tile.

According to the configuration,
a tile can enable either the AXIS Manager or the AXIS Slave VIP core. Then, the data generator
attached to an enabled AXIS Manager VIP Cores creates a given number of AXI-Stream transactions that are forwarded
to the driver, which drives the AXI-Stream interface of the Manager VIP Core providing the data to the NI. In addition,
the driver sends the transaction to the scoreboard as a reference model.

A part of the data generators, there is a tile configured with a generator that represents a very *basic NoC controller*.
At some point in time, this controller reconfigures the routing algorithm of the NoC writing to the corresponding
address space of each NoC Switch. It is assumed that the NoC is empty at that point. To guarantee it the data generators
stop to create stimuli some time before and resume the activity some time later.

During the operation, each tile monitor captures the AXIS interface signals on the AXI-Stream subordinate VIP cores,
generates AXI-Stream transactions and send them to
the scoreboard as the actual output of the NoC.

Then, the scoreboard can check the result of the test comparing the actual and reference transactions.

# The enviroment configuration

It is generated randomly and it contains:
- The total number of AXI-Stream transfers to generate
- How many transfers will be generated by each AXI-Stream Tile generator
- The type of tile: Manager or Subordinate
- Tile 0 is always the NoC controller
- Control and Status Virtual Network for router reconfiguration is always set to 0
- The ready policy that will run each AXIS Subordinate VIP Core

